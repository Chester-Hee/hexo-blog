<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="code farmer."><title>JavaScript兼容性解决方式 | 追赶日落日出</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/font.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?66bdd0a984d281716c78a567d1f39e67";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><article class="wrapper"><div class="post-main"><div class="nav"><nav class="container"><a class="sidebar-nav-item active" href="/">首页</a><a class="sidebar-nav-item" href="/archives">归档</a><a class="sidebar-nav-item" href="/about">关于我</a></nav><div class="container post-meta"><div class="post-tags"><a class="post-tag-link" href="/tags/JavaScript/">JavaScript</a></div><div class="post-time">2018-04-08</div></div></div><div class="container post-header"><h1>JavaScript兼容性解决方式</h1></div><div class="container post-toc"><details class="toc"><summary class="toc-accordion">Table of Contents</summary><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#前端兼容问题出现的原因"><span class="toc-number">1.</span> <span class="toc-text">前端兼容问题出现的原因</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#前端兼容性主要有哪些问题"><span class="toc-number">2.</span> <span class="toc-text">前端兼容性主要有哪些问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#如何处理兼容性问题"><span class="toc-number">3.</span> <span class="toc-text">如何处理兼容性问题</span></a></li></ol></details></div><div class="container post-content"><h4 id="前端兼容问题出现的原因"><a href="#前端兼容问题出现的原因" class="headerlink" title="前端兼容问题出现的原因"></a>前端兼容问题出现的原因</h4><p>何为操作系统？<strong>操作系统（Operating System）</strong>是管理和控制计算机硬件与软件资源的计算机程序。是的，任何的应用软件必须在操作系统的支持下运行。</p>
<p>大家会疑问？为什么我要讲操作系统？你猜！</p>
<p>其实，我只想表述我自己的一个观点，“Web浏览器是Web应用的操作系统”。这句话来源于JavaScript权威指南。</p>
<p>正因为Web浏览器（IE、Mozilla、Apple、Google、360浏览器、QQ浏览器）的多样性，才出现了所谓的兼容性问题。</p>
<p>编写一个JavaScript程序并能正确运行在这么多平台之上，的确是一种挑战。</p>
<h4 id="前端兼容性主要有哪些问题"><a href="#前端兼容性主要有哪些问题" class="headerlink" title="前端兼容性主要有哪些问题"></a>前端兼容性主要有哪些问题</h4><ul>
<li><p><strong>软件更新</strong>；在web平台的发展中，一个标准规范会倡导一个新的特性或API。是的，浏览器开发商觉得某个特性很不错，那他可能在浏览器中实现它。如果某个特性有非常多的开发商实现，那么这个特性或API就会广泛使用，但是某个特性的实现会有一个先后的过程，导致一个结果“旧的浏览器不支持这个特性”。</p>
</li>
<li><p><strong>设计差异</strong>；浏览器开发商们同样实现一个特性或API，但他们的观点和编码风格差异，同样的一个功能在同的浏览器中也会有很大的差别。</p>
</li>
<li><p><strong>软件BUG</strong>；任何的软件都存在BUG，Web浏览器也是一个软件。并且没有按照规范准确实现客户端的JavaScriptAPI</p>
</li>
</ul>
<h4 id="如何处理兼容性问题"><a href="#如何处理兼容性问题" class="headerlink" title="如何处理兼容性问题"></a>如何处理兼容性问题</h4><p>如果你去面试一个前端工程师，面试官最常问的一个问题：如何解决浏览器的兼容性问题？</p>
<ul>
<li>功能测试（capability testing）是解决不兼容问题的一种强大技术。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">if(element.addEventListener)&#123;</span><br><span class="line">    //W3C方法</span><br><span class="line">    element.addEventListener(&quot;keydown&quot;,handler,false);</span><br><span class="line">    element.addEventListener(&quot;keypress&quot;,handler,false);</span><br><span class="line">&#125;else if(element.attachEvent)&#123;</span><br><span class="line">    //IE方法</span><br><span class="line">    element.attachEvent(&quot;onkeydown&quot;,handler);</span><br><span class="line">    element.attachEvent(&quot;onkeypress&quot;,handler);</span><br><span class="line">&#125;else&#123;</span><br><span class="line">    //选择广泛使用方式</span><br><span class="line">    element.onkeydown = element.onkeypress = handler;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>处理兼容性问题其中最简单的方法就是使用类库（JQuery、Zepto、Excanvas），前两者定义了新的客户端API并兼容所有浏览器。例如，JQuery处理事件程序注册通过Bind进行完成。<br>但是，有时候为了实现一个非常简单的功能，透明地实现整个标准并非真正可行。</li>
</ul>
<p>例如，我的一个应用：只在页面实现一个Ajax请求！</p>
<p><strong>使用兼容性类库：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;./core/zepto.min.js&quot;&gt;&lt;/script&gt; 24k</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">            type: &apos;GET&apos;,</span><br><span class="line">            url: &apos;./index.html&apos;,</span><br><span class="line">            data: &#123;&#125;, //参数</span><br><span class="line">            dataType: &apos;html&apos;, //返回类型</span><br><span class="line">            success: function(data)&#123;</span><br><span class="line">                //成功回调</span><br><span class="line">            &#125;,</span><br><span class="line">            error: function(xhr, type)&#123;</span><br><span class="line">                alert(&apos;Ajax error!&apos;)</span><br><span class="line">            &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p><strong>使用原生JavaScript:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">var xml_http;</span><br><span class="line">if (window.ActiveXObject) &#123;</span><br><span class="line">    xml_http = new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);</span><br><span class="line">&#125; else if (window.XMLHttpRequest) &#123;</span><br><span class="line">    xml_http = new XMLHttpRequest();</span><br><span class="line">&#125;</span><br><span class="line">xml_http.open(&quot;GET&quot;, &quot;./index&quot;);</span><br><span class="line">xml_http.send(null);</span><br><span class="line">xml_http.onreadystatechange = function () &#123;</span><br><span class="line">    if ((xml_http.readyState == 4) &amp;&amp; (xml_http.status == 200)) &#123;</span><br><span class="line">        alert(&apos;success&apos;);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        alert(&apos;fail&apos;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>　　考虑兼容性问题时，要考虑适中的方法引用。</p>
<ul>
<li>分级浏览器支持（graded browser support）是由Yahoo率先提出的一种测试技术。</li>
</ul>
<p>从某种维度将浏览器版本/操作系统变体进行分级，使用不同的测试用例，从而解决兼容性问题。</p>
<ul>
<li>Internet Explorer是的条件注释</li>
</ul>
<p>其实我们不难发现，客户端JavaScript编程中的很多不兼容性问题都是针对IE的，也就是说必须按照某种方式为IE编写代码，而按照另一种方式为其他浏览器编写代码。IE支持条件注释。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!–[if lt IE 8]&gt;</span><br><span class="line">&lt;script src=”http://ie7-js.googlecode.com/svn/version/2.0(beta)/IE8.js” type=”text/javascript”&gt;&lt;/script&gt;</span><br><span class="line">&lt;![endif]–&gt;</span><br><span class="line">&lt;!-- Le HTML5 shim, for IE6-8 support of HTML5 elements --&gt;</span><br><span class="line">&lt;!--[if lt IE 9]&gt;</span><br><span class="line">&lt;script src=&quot;__STATIC__/bootstrap/js/html5shiv.js?v=&#123;:SITE_VERSION&#125;&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;![endif]--&gt;</span><br><span class="line">&lt;block name=&quot;style&quot;&gt;&lt;/block&gt;</span><br><span class="line">&lt;!--[if lt IE 9]&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;__STATIC__/jquery-1.10.2.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;![endif]--&gt;</span><br><span class="line">&lt;!--[if gte IE 9]&gt;&lt;!--&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;__STATIC__/jquery-2.0.3.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;!--&lt;![endif]--&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>本文只是简单讲解了前端JavaScript脚本的兼容性问题原因及解决办法，当然，这些都只是一个基础的篇章。</p>
</blockquote>
</div></div><div class="post-main post-comment"></div></article><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
  $(".fancybox").fancybox();
});
</script></body></html>