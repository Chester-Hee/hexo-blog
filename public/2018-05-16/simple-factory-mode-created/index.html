<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="code farmer."><title>Simple Factory 简单工厂模式（创建型） | 追赶日落日出</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/font.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?66bdd0a984d281716c78a567d1f39e67";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><article class="wrapper"><div class="post-main"><div class="nav"><nav class="container"><a class="sidebar-nav-item active" href="/">首页</a><a class="sidebar-nav-item" href="/archives">归档</a><a class="sidebar-nav-item" href="/about">关于我</a></nav><div class="container post-meta"><div class="post-tags"><a class="post-tag-link" href="/tags/设计模式/">设计模式</a></div><div class="post-time">2018-05-16</div></div></div><div class="container post-header"><h1>Simple Factory 简单工厂模式（创建型）</h1></div><div class="container post-toc"><details class="toc"><summary class="toc-accordion">Table of Contents</summary><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#简介"><span class="toc-number">1.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#实例应用（图表库）"><span class="toc-number">2.</span> <span class="toc-text">实例应用（图表库）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PHP实现源码"><span class="toc-number">3.</span> <span class="toc-text">PHP实现源码</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#PieChart-php"><span class="toc-number">3.1.</span> <span class="toc-text">PieChart.php</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#LineChart-php"><span class="toc-number">3.2.</span> <span class="toc-text">LineChart.php</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#BarChart-php"><span class="toc-number">3.3.</span> <span class="toc-text">BarChart.php</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Factory-php"><span class="toc-number">3.4.</span> <span class="toc-text">Factory.php</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#index-php"><span class="toc-number">3.5.</span> <span class="toc-text">index.php</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#简单工厂模式优点"><span class="toc-number">4.</span> <span class="toc-text">简单工厂模式优点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#简单工厂模式缺点"><span class="toc-number">5.</span> <span class="toc-text">简单工厂模式缺点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#应用场景"><span class="toc-number">6.</span> <span class="toc-text">应用场景</span></a></li></ol></details></div><div class="container post-content"><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>简单工厂模式，是三种工厂模式中最简单且最容易理解的创建型模式。</p>
<h3 id="实例应用（图表库）"><a href="#实例应用（图表库）" class="headerlink" title="实例应用（图表库）"></a>实例应用（图表库）</h3><p>假设有这样一个需求，使用PHP语言设计一个图表库</p>
<p>图表类型：饼图，条形图，折线图</p>
<p>使用简单工厂模式，我们得到一个关系图</p>
<p><img src="/images/pasted-1.png" alt="upload successful"></p>
<p>工厂负责跟进客户端提供的参数，生产不同类型的图表。所以，简单的工厂模式，所有产品生产的初始化工作都会在工厂类这一个类进行。</p>
<h3 id="PHP实现源码"><a href="#PHP实现源码" class="headerlink" title="PHP实现源码"></a>PHP实现源码</h3><p>PHP语言实现</p>
<h4 id="PieChart-php"><a href="#PieChart-php" class="headerlink" title="PieChart.php"></a>PieChart.php</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">SimpleFactory</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PieChart</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">init</span><span class="params">($data = [])</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'pie init data.'</span>.<span class="string">"\r\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">display</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'pie display.'</span>.<span class="string">"\r\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="LineChart-php"><a href="#LineChart-php" class="headerlink" title="LineChart.php"></a>LineChart.php</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">SimpleFactory</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LineChart</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">init</span><span class="params">($data = [])</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'line init data.'</span>.<span class="string">"\r\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">display</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'line display.'</span>.<span class="string">"\r\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="BarChart-php"><a href="#BarChart-php" class="headerlink" title="BarChart.php"></a>BarChart.php</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">SimpleFactory</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BarChart</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">init</span><span class="params">($data = [])</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'bar init data.'</span>.<span class="string">"\r\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">display</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'bar display.'</span>.<span class="string">"\r\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Factory-php"><a href="#Factory-php" class="headerlink" title="Factory.php"></a>Factory.php</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">SimpleFactory</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Factory</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getChartObject</span><span class="params">($type)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> ($type) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">case</span> <span class="string">'pie'</span>:</span><br><span class="line">                $pie = <span class="keyword">new</span> PieChart();</span><br><span class="line">                <span class="keyword">return</span> $pie;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'line'</span>:</span><br><span class="line">                $line = <span class="keyword">new</span> LineChart();</span><br><span class="line">                <span class="keyword">return</span> $line;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'bar'</span>:</span><br><span class="line">                $bar = <span class="keyword">new</span> BarChart();</span><br><span class="line">                <span class="keyword">return</span> $bar;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> \<span class="keyword">Exception</span>(<span class="string">'无法创建该图'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="index-php"><a href="#index-php" class="headerlink" title="index.php"></a>index.php</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 使用工厂创建图表产品</span></span><br><span class="line">$pie = \SimpleFactory\Factory::getChartObject(<span class="string">'pie'</span>);</span><br><span class="line">$pie-&gt;init();</span><br><span class="line">$pie-&gt;display();</span><br><span class="line"></span><br><span class="line">$bar = \SimpleFactory\Factory::getChartObject(<span class="string">'bar'</span>);</span><br><span class="line">$bar-&gt;init();</span><br><span class="line">$bar-&gt;display();</span><br><span class="line"></span><br><span class="line">$line = \SimpleFactory\Factory::getChartObject(<span class="string">'line'</span>);</span><br><span class="line">$line-&gt;init();</span><br><span class="line">$line-&gt;display();</span><br><span class="line"></span><br><span class="line">output 输出信息</span><br><span class="line"></span><br><span class="line">pie init data.</span><br><span class="line">pie display.</span><br><span class="line">bar init data.</span><br><span class="line">bar display.</span><br><span class="line">line init data.</span><br><span class="line">line display.</span><br></pre></td></tr></table></figure>
<h3 id="简单工厂模式优点"><a href="#简单工厂模式优点" class="headerlink" title="简单工厂模式优点"></a>简单工厂模式优点</h3><ul>
<li>(1) 工厂类包含必要的判断逻辑，可以决定在什么时候创建哪一个产品类的实例，客户端可以免除直接创建产品对象的职责，而仅仅“消费”产品，简单工厂模式实现了对象创建和使用的分离。</li>
<li>(2) 客户端无须知道所创建的具体产品类的类名，只需要知道具体产品类所对应的参数即可，对于一些复杂的类名，通过简单工厂模式可以在一定程度减少使用者的记忆量。</li>
<li>(3) 通过引入配置文件，可以在不修改任何客户端代码的情况下更换和增加新的具体产品类，在一定程度上提高了系统的灵活性。</li>
</ul>
<h3 id="简单工厂模式缺点"><a href="#简单工厂模式缺点" class="headerlink" title="简单工厂模式缺点"></a>简单工厂模式缺点</h3><ul>
<li>(1) 由于工厂类集中了所有产品的创建逻辑，职责过重，一旦不能正常工作，整个系统都要受到影响。</li>
<li>(2) 使用简单工厂模式势必会增加系统中类的个数（引入了新的工厂类），增加了系统的复杂度和理解难度。</li>
<li>(3) 系统扩展困难，一旦添加新产品就不得不修改工厂逻辑，在产品类型较多时，有可能造成工厂逻辑过于复杂，不利于系统的扩展和维护。</li>
<li>(4) 简单工厂模式由于使用了静态工厂方法，造成工厂角色无法形成基于继承的等级结构。</li>
</ul>
<h3 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h3><ul>
<li>(1) 工厂类负责创建的对象比较少，由于创建的对象较少，不会造成工厂方法中的业务逻辑太过复杂。</li>
<li>(2) 客户端只知道传入工厂类的参数，对于如何创建对象并不关心。</li>
</ul>
</div></div><div class="post-main post-comment"></div></article><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
  $(".fancybox").fancybox();
});
</script></body></html>